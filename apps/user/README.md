# User 模块

## 简介

`User` 模块负责系统中用户的创建、查询、更新和删除等功能。该模块提供了用户个人资料管理和管理员用户管理的功能，支持用户角色和状态的控制，是系统用户身份和权限管理的核心组件。

## 功能特点

- 用户个人资料管理：查询和更新个人资料
- 用户管理：创建、查询、更新和删除用户（管理员功能）
- 角色管理：支持管理员、普通会员和VIP会员角色
- 状态控制：支持启用和禁用用户状态
- 权限控制：基于角色的权限控制系统

## 模块结构

```
user/
├── controller.go          # 控制器，处理HTTP请求
├── model/                 # 数据模型
│   ├── request.go         # 请求模型
│   └── response.go        # 响应模型
├── router.go              # 路由配置
├── service.go             # 业务逻辑服务
└── README.md              # 模块说明文档
```

## API 接口

### 获取个人资料

- **URL**: `/api/profile`
- **方法**: GET
- **认证**: 需要用户登录
- **描述**: 获取当前登录用户的个人资料
- **响应示例**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "username": "user1",
    "email": "user1@example.com",
    "role": 0,
    "status": 1,
    "created_at": "2023-01-01T12:00:00Z",
    "last_login": "2023-01-02T12:00:00Z"
  },
  "message": "获取成功"
}
```

### 更新个人资料

- **URL**: `/api/profile`
- **方法**: PUT
- **认证**: 需要用户登录
- **描述**: 更新当前登录用户的个人资料
- **请求示例**:

```json
{
  "email": "newemail@example.com"
}
```

- **响应示例**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "username": "user1",
    "email": "newemail@example.com",
    "role": 0,
    "status": 1,
    "created_at": "2023-01-01T12:00:00Z",
    "last_login": "2023-01-02T12:00:00Z"
  },
  "message": "更新成功"
}
```

### 获取用户权限

- **URL**: `/api/v1/permission`
- **方法**: GET
- **认证**: 需要用户登录
- **描述**: 获取当前用户的权限信息
- **响应示例**:

```json
{
  "code": 200,
  "data": {
    "role": 0,
    "role_name": "管理员",
    "permissions": {
      "can_manage_users": true,
      "can_access_vip_features": true
    }
  },
  "message": "获取成功"
}
```

## 使用说明

1. 用户注册后，默认为普通会员角色
2. 管理员可以创建、查询、更新和删除用户
3. 用户可以查询和更新自己的个人资料
4. 用户状态为禁用时，无法登录系统
5. 不同角色的用户拥有不同的权限和功能访问权限

## 用户角色说明

- **管理员 (0)**：可以管理所有用户和系统的所有功能
- **普通会员 (1)**：只能管理自己的个人资料和使用系统的基本功能
- **VIP会员 (2)**：除了普通会员的权限外，还可以使用高级功能和获得优先支持

## 用户状态说明

- **禁用 (0)**：用户账号被禁用，无法登录系统
- **启用 (1)**：用户账号正常，可以登录系统

## 开发与扩展

如需扩展用户模块功能，可以考虑以下方向：

1. 添加更多用户角色，满足不同级别的权限需求
2. 实现用户组功能，支持批量管理用户权限
3. 添加用户资料完善度检查，引导用户完善个人信息
4. 实现用户行为分析功能，记录用户操作日志
5. 添加用户反馈和支持功能，提高用户体验