# Notice 模块

## 简介

`Notice` 模块提供了系统通知管理功能，负责处理系统内的通知信息，包括创建、更新、删除和查询通知等操作。该模块使管理员能够向用户发布各种级别的系统通知，用户可以获取和查看这些通知信息。

## 功能特点

- 通知管理：创建、更新、删除和查询系统通知
- 通知分级：支持普通、重要和紧急三个等级的通知
- 状态控制：可启用或禁用通知
- 活动通知：获取当前有效的通知列表
- 权限控制：管理员和普通用户权限分离

## 模块结构

```
notice/
├── controller.go          # 控制器，处理HTTP请求
├── model/                 # 数据模型
│   └── notice.go          # 通知模型定义
├── router.go              # 路由配置
├── service.go             # 业务逻辑服务
└── README.md              # 模块说明文档
```

## API 接口

### 创建通知

- **URL**: `/api/v1/notices`
- **方法**: POST
- **认证**: 需要管理员权限
- **描述**: 创建新的系统通知
- **请求示例**:

```json
{
  "title": "系统维护通知",
  "content": "系统将于2023年1月1日进行维护升级，届时将暂停服务2小时。",
  "level": 1,
  "status": 1,
  "start_time": "2022-12-30T00:00:00Z",
  "end_time": "2023-01-02T00:00:00Z"
}
```

- **响应示例**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "title": "系统维护通知",
    "content": "系统将于2023年1月1日进行维护升级，届时将暂停服务2小时。",
    "level": 1,
    "status": 1,
    "start_time": "2022-12-30T00:00:00Z",
    "end_time": "2023-01-02T00:00:00Z",
    "created_at": "2022-12-25T10:00:00Z",
    "updated_at": "2022-12-25T10:00:00Z"
  },
  "message": "创建成功"
}
```

### 获取通知列表

- **URL**: `/api/v1/notices`
- **方法**: GET
- **认证**: 需要用户登录
- **描述**: 获取系统中的通知列表
- **请求参数**:
  - `page`: 页码，默认1
  - `page_size`: 每页数量，默认10
  - `level`: 通知等级，可选
  - `status`: 通知状态，可选

- **响应示例**:

```json
{
  "code": 200,
  "data": {
    "total": 2,
    "items": [
      {
        "id": 1,
        "title": "系统维护通知",
        "content": "系统将于2023年1月1日进行维护升级，届时将暂停服务2小时。",
        "level": 1,
        "status": 1,
        "start_time": "2022-12-30T00:00:00Z",
        "end_time": "2023-01-02T00:00:00Z",
        "created_at": "2022-12-25T10:00:00Z",
        "updated_at": "2022-12-25T10:00:00Z"
      },
      {
        "id": 2,
        "title": "新功能上线通知",
        "content": "系统新增了XXX功能，欢迎使用。",
        "level": 0,
        "status": 1,
        "start_time": "2022-12-20T00:00:00Z",
        "end_time": "2023-01-20T00:00:00Z",
        "created_at": "2022-12-20T10:00:00Z",
        "updated_at": "2022-12-20T10:00:00Z"
      }
    ]
  },
  "message": "获取成功"
}
```

### 获取活动通知列表

- **URL**: `/api/v1/notices/active`
- **方法**: GET
- **认证**: 需要用户登录
- **描述**: 获取当前有效的通知列表
- **响应示例**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "title": "系统维护通知",
      "content": "系统将于2023年1月1日进行维护升级，届时将暂停服务2小时。",
      "level": 1,
      "status": 1,
      "start_time": "2022-12-30T00:00:00Z",
      "end_time": "2023-01-02T00:00:00Z",
      "created_at": "2022-12-25T10:00:00Z",
      "updated_at": "2022-12-25T10:00:00Z"
    }
  ],
  "message": "获取成功"
}
```

## 使用说明

1. 管理员可以通过创建通知接口发布系统通知
2. 通知可以设置开始时间和结束时间，在有效期内的通知才会显示给用户
3. 通知可以设置不同的等级，以区分重要程度
4. 通知可以设置状态为启用或禁用，只有启用状态的通知才会显示给用户
5. 用户可以通过获取通知列表接口查看所有通知，或通过获取活动通知列表接口查看当前有效的通知

## 通知等级说明

- **0**: 普通通知 - 一般性的系统信息，如新功能上线、使用提示等
- **1**: 重要通知 - 需要用户关注的信息，如系统维护、功能变更等
- **2**: 紧急通知 - 需要用户立即关注的信息，如系统故障、安全问题等

## 通知状态说明

- **0**: 禁用 - 通知不会显示给用户
- **1**: 启用 - 通知会显示给用户（在有效期内）

## 开发与扩展

如需扩展通知模块功能，可以考虑以下方向：

1. 添加通知推送功能，如邮件、短信或WebSocket实时推送
2. 实现通知已读标记功能，跟踪用户是否已读通知
3. 添加通知分类功能，如系统通知、活动通知、安全通知等
4. 实现通知模板功能，方便管理员快速创建常用类型的通知
5. 添加通知优先级排序功能，确保重要通知优先显示