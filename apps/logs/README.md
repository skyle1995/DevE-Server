# Logs 模块

## 简介

`Logs` 模块负责处理系统日志相关的功能，提供日志查询、过滤和清理服务。该模块支持多种日志类型，并根据用户角色提供不同的访问权限，确保系统运行状态可追踪和审计。

## 功能特点

- 支持多种日志类型（登录日志、操作日志、系统日志、应用日志）
- 提供基于角色的访问控制（管理员可查看所有日志，普通用户只能查看自己的日志）
- 支持多维度的日志筛选（日志类型、应用ID、用户ID等）
- 提供分页查询功能，优化大量日志数据的展示
- 支持日志清理功能，便于系统维护

## 模块结构

```
logs/
├── controller.go          # 控制器实现，包含日志查询和清理逻辑
├── router.go              # 路由注册，定义API接口路径和权限
└── README.md              # 模块说明文档
```

## API 接口

### 获取所有日志

- **URL**: `/api/v1/logs`
- **方法**: GET
- **认证**: 需要管理员权限
- **描述**: 获取系统中的所有日志，支持多种筛选条件
- **查询参数**:
  - `type`: 日志类型（1-登录日志, 2-操作日志，3-系统日志，4-应用日志）
  - `app_id`: 应用ID筛选
  - `user_id`: 用户ID筛选
  - `page`: 页码，默认为1
  - `page_size`: 每页记录数，默认为10
- **响应示例**:

```json
{
  "code": 200,
  "data": {
    "list": [...],  // 日志记录列表
    "pagination": {
      "current_page": 1,
      "page_size": 10,
      "total": 100
    }
  },
  "message": "获取日志成功"
}
```

### 获取当前用户日志

- **URL**: `/api/v1/logs/my`
- **方法**: GET
- **认证**: 需要JWT令牌
- **描述**: 获取当前登录用户的相关日志
- **查询参数**:
  - `type`: 日志类型（1-登录日志, 2-操作日志，3-系统日志，4-应用日志）
  - `app_id`: 应用ID筛选
  - `page`: 页码，默认为1
  - `page_size`: 每页记录数，默认为10
- **响应示例**: 同上

### 清空日志

- **URL**: `/api/v1/logs`
- **方法**: DELETE
- **认证**: 需要管理员权限
- **描述**: 清空符合条件的日志记录
- **查询参数**:
  - `type`: 日志类型（可选）
  - `app_id`: 应用ID（可选）
  - `user_id`: 用户ID（可选）
- **响应示例**:

```json
{
  "code": 200,
  "data": null,
  "message": "清空日志成功"
}
```

## 使用说明

1. 管理员可通过 `/api/v1/logs` 接口查看所有日志记录
2. 普通用户可通过 `/api/v1/logs/my` 接口查看与自己相关的日志
3. 可通过查询参数对日志进行筛选和分页
4. 管理员可通过DELETE方法清空符合条件的日志

## 日志类型说明

- **登录日志** (类型值为1): 记录用户登录、登出等认证相关操作
- **操作日志** (类型值为2): 记录用户在系统中的各种操作行为
- **系统日志** (类型值为3): 记录系统运行状态、错误等信息
- **应用日志** (类型值为4): 记录与特定应用相关的日志信息

## 开发与扩展

如需扩展日志功能，可以考虑以下方向：

1. 添加更多的日志类型
2. 增强日志筛选功能，如时间范围筛选
3. 实现日志导出功能
4. 添加日志统计分析功能
5. 实现日志自动归档和清理策略